<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Todo List</h1>
    <br>
    <form>
        <div>
            <input type="text" id="inputValue">
            <button class="btn">Add</button>
        </div>
        <section class="todo-list-elem"></section>
    </form>

    

    <script>
        let mainTodoElem = document.querySelector('.todo-list-elem');
        let inputValue = document.getElementById('inputValue');
    
        const getTodoList = () => {
            return JSON.parse(localStorage.getItem('TodoList'));
        }
    
        const addTodolistLocalStorage = (localTodoList) => {
            return localStorage.setItem('TodoList', JSON.stringify(localTodoList));
        }
    
        let localTodoList = getTodoList() || [];
    
        const addTodoDynamic = (item) => {
            let div = document.createElement('div');
            div.classList.add('main_todo_div');
            div.innerHTML = `<li>${item}</li> <button class="deleteBtn">Delete</button>`;
            mainTodoElem.append(div);
            inputValue.value = '';
        }
    
        const addTodoList = (e) => {
            e.preventDefault();
    
            let todoListValue = inputValue.value.trim();
    
            if (todoListValue !== "" && !localTodoList.includes(todoListValue)) {
                localTodoList.push(todoListValue);
                localTodoList = [...new Set(localTodoList)];
                localStorage.setItem('TodoList', JSON.stringify(localTodoList));
    
                addTodoDynamic(todoListValue);
            } else {
                alert('Duplicate or add value');
            }
        }
    
        const showTodo = () => {
            localTodoList.forEach((item) => {
                addTodoDynamic(item);
            });
        }
    
        showTodo();
    
        const removeTodoElem = (e) => {
            const todoToRemove = e.target;
            let todolistcontent = todoToRemove.previousElementSibling.innerText;
            let parentElem = todoToRemove.parentElement;
    
            localTodoList = localTodoList.filter((curTodo) => {
                return curTodo !== todolistcontent.toLowerCase();
            });
    
            addTodolistLocalStorage(localTodoList);
            parentElem.remove();
        }
    
        mainTodoElem.addEventListener('click', (e) => {
            if (e.target.classList.contains('deleteBtn')) {
                removeTodoElem(e);
            }
        });
    
        document.querySelector('.btn').addEventListener("click", (e) => {
            addTodoList(e);
        });
    </script>
    
</body>
</html>